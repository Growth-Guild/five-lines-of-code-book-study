# Chapter 10. 코드 추가에 대한 두려움 떨쳐내기

## 10.1 불확싱성 받아들이기: 위험 감수
* 소프트웨어 개발은 도메인을 학습하고 그 지식을 프로그래밍 언어로 코드화하는 것이다.
* 지식을 구축하는 가장 효과적인 방법은 실험이지만 거기에는 용기가 필요하다.
* 가장 불확실한 부분을 분명히 하고 주의를 기울여야 한다.
* 스크럼의 5가지 핵심 가치 중 하나가 용기인 이유다.

## 10.2 두려움 극복을 위한 스파이크 사용
* 스파이크는 자신감과 함께 첫 번째 실제 버전을 더 좋게 만드는 데 사용할 수 있는 제식을 제공한다.
* 스파이크는 강력하지만, 훈련이 필요해서 도입하기 어려울 수 있다.
  * 폐기될 코드 작성을 권장하고 장려하는 문화가 필요하다.
  * 이해관계자는 제품이 코드나 기능이 아니라 지식이라는 것을 인지할 필요가 있다.
* 스파이크 코드를 프로덕션에 허용하지 않는 것에 대해 엄격해야 하고 제품이 지식이라는 개념을 전파해야 한다.
  * 스파이크로는 가설, 실험 및 사용자 친화성을 테스트할 수 있다.
* 이런 지식을 전파하기 위해 슬라이드나 백서와 같이 지식을 문서화하는 형식으로 결과를 체계화하는 것이 도움이 될 수 있다.

## 10.3 낭비나 위험에 대한 두려움 극복을 위한 사용 시간 비율 지정
* 코드가 두려워지는 또 다른 증상은 개발 도구와 파이프라인이 실제 프로덕션 코드보다 훨씬 정교한 경우다.
* 이러한 도구들은 위험이나 낭비를 줄이는 데 사용해야 한다. 그것들에 너무 시간을 소비하는 것은 낭비나 위험에 대한 두려움이 산출물을 인도하려는 욕구보다 더 크다는 것을 암시한다.
* 중요한 유지보수 작업이 특정 작업으로 인해 무시되지 않게 하고, 다른 한편으로는 복잡성 비율을 낮추는 것이 중요하다.

## 10.4 불완전성에 대한 두려움 극복을 위한 점진적 개선
* 자신을 보호하기 위해 코드를 완벽하게 만들려는 마음에 코드를 공개하지 않는 것은 생산성에 실질적인 영향을 미친다.
* 개발자는 종종 다른 사람의 코드를 경솔하게 비판한다. 하지만 완벽한 코드가 존재한다고 생각해서는 안된다.
  * 코드를 조금 더 효율적으로 만들려면 스킬과 프로파일링이 필요하다.
  * 사용하기 쉽게 하려면 테스트와 실험이 필요하다.
  * 안정적인 코드를 만들려면 테스트나 정확한 데이터 타입의 사용이 필요하다.
* 코드를 작성할 때 고려해야 할 지표가 너무 많고 한 번에 모든 지표를 최적화할 수 없다는 점을 감안할 때, 가장 중요한 것은 개발자 삶에 맞춘 최적화다.
  * 즉, 일을 받는 순간부터 작업을 시작하기까지의 시간을 최대한 짧게 만드는 것이다.
  * 개발자의 삶에 최적화하면 테스트, 테스터, 이해관계자 및 사용자로부터 피드백을 받을 때까지 실습을 최대화하고 피드백까지의 시간을 최소화할 수 있다는 추가적인 장점이 있다.

## 10.5 복사 및 붙여넣기가 속도에 미치는 영향
* 코드를 공유하면 코드가 사용되는 모든 위치에 영향을 미치기 쉽다.
  * 동작에 대한 전역적인 변경을 신속하게 할 수 있음을 의미한다.
  * 하지만 호출 측의 한 부분에 대해서만 동작을 변경하는 것은 간단하지 않다.
* 코드를 복사해서 동작을 공유하면 각 호출이 분리되어 호출하는 측에 따라 변경하기 쉽다.
  * 하지만 수정이 필요한 경우 모든 위치에서 수정해야 해서 이 동작에 전역적인 영향을 주기 어렵다.
* 코드를 공유하면 전역적인 동작 변경 속도가 증가하고, 코드를 복사하면 지역적인 동작 변경 속도가 증가한다.

## 10.6 확장성을 통한 추가에 의한 변경
* 코드를 추가하는 또 다른 방법은 확장성을 이용하는 것이다.
* 일부 코드가 변경에 수용적이어야 한다는 것을 안다면 확장 가능하게 만들 수 있다.
  * 별도의 클래스로 변형을 만든다는 것을 의미한다.
* 변형이 발생하는 지점은 코드를 더 복잡하게 만드는데, 코드 흐름을 이해하는 것이 더 어렵기 때문에 나중에 수정하기 더 어려울 수 있다.
* 도메인에 관련되지 않은 복잡성을 우발적 복잡성(Accidental complexity)라고 한다.
* 코드는 실제 세계를 나타내므로 도메인으로부터 일부 복잡성이 상속된다.
  * 본직적 복잡성(Essential complexity)이라고 한다.
* 코드를 좀 더 확장 가능하게 만드는 두 가지 주요한 방법은 클래스로 타입 코드를 대체하는 것과 전략 패턴이 있다.

## 10.7 추가에 의한 변경으로 이전 버전과의 호환성 확보
* 코드에서 가장 안전한 것은 아무것도 변경하지 않는 것이다.
* 코드는 코드의 생애 동안 이전 버전과의 호환성을 유지해야 한다.
  * 변경할 때마다 수정이 아닌, 공개 인터페이스의 새로운 메서드, API의 새로운 접점이나 이벤트 기반 시스템의 새로운 이벤트를 도입한다는 것을 의미한다.
  * 원래 메서드의 기능은 그대로 유지한다.

## 10.8 기능 토글로 추가에 의한 변경
* 코드 배포가 곧 릴리스라고 생각할 때, 코드를 실행하지 않고도 코드베이스에 포함할 수 있다.
* 코드를 무시하는 가장 쉬운 방법은 if 블록으로 감싸는 것이다.

## 10.9 '추상화를 통힌 분기'로 추가에 의한 변경
* 기능 토글은 'if 문에서 else 를 사용하지 말 것'이라는 규칙을 위반하게 된다.
* 이를 해결하기 위한 방법은 두 가지가 있다.
  * 가장 간단한 것은 기능 토글에서는 if 문들을 일시적으로만 사용하는 것이다. 기능 플래그가 한 위치에서만 사용되는 경우 이를 근거로 사용한다.
  * 클래스로 타입 코드 대체 패턴을 도입한다. 추상화를 통한 분기라고도 한다. 복잡한 기능 전환을 관리하는 데 도움이 된다. 

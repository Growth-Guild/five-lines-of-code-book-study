# Chapter 13. 나쁜 코드를 식별 가능하게 만들기
* 나쁜 코드를 안 좋아 보이게 만들어서 품질의 수준을 명확히 표시하는 방법을 안티-리팩터링(anti-refactoring)이라고 한다.

## 13.1 나쁜 코드에 대처하는 자세
* 코드의 복잡성이나 문제, 또는 대부분의 경우 단순히 시간의 촉박함 같은 제약으로 인해 그 코드를 원하는 수준으로 리팩터링하지 못할 때가 많다.
  * 이 상황에서는 상황 그대로 두는 편이 오히려 더 낫다.
* 나쁜 코드를 남겨두면 다시 찾기가 쉽고 통제가 지속 가능하지 않다는 신호를 준다는 장점이 있다.

## 13.2 깨끗한 코드와 레거시 코드로 분리
* 더 나쁜 코드는 찾기가 더 쉽다.
* 코드가 눈에 띄게 나쁠 경우 지속적으로 상기시켜 시간이 있을 때 누군가가 수정할 가능성이 훨씬 높다. 잘 만들 수 없다면 눈에 띄게 만들어야 한다.

## 13.3 나쁜 코드를 찾는 방법

### 13.3.1 단순하고 구체적인 코드
* 다섯 줄 제한과 if 문은 함수의 시작에만 배치한다.

### 13.3.2 완전하고 추상적인 코드
* 마법 상수(Magic constants)나 코드 중복을 찾는다.

### 13.3.3 순환 복잡도: 알고리즘(객관적)
* 순환 복잡도는 코드를 통과하는 경로의 수를 계산하는 것이다.
  * if 는 두 개의 경로가 있다. for 및 while 도 마찬가지다.

### 13.3.4 인지 복잡도: 알고리즘(주관적)
* 메서드를 읽는 동안 얼마나 많은 정보를 유지해야 하는지를 측정하는 것이다.
* 사람이 통과하는 각 조건을 기억해야 하기 때문에 순환적 복잡도보다는 중첩을 찾거나 다루는 경향이 있다.
* 인지 복잡도는 사람이 무언가를 읽는 것이 얼마나 어려운지에 더 가까운 추정치일 수 있다.
  * 사람이 한눈에 알아볼 수 있는 것을 찾는 과정에서는 들여쓰기를 활용하는 것만큼 좋은 것은 없다.

## 13.4 코드를 안전하게 나쁜 코드로 보이기 위한 규칙
1. 올바른 정보를 절대 훼손하지 말 것
2. 향후 리팩터링을 어렵게 만들지 말 것
3. 결과를 한눈에 알 수 있을 것

## 13.5 나쁜 코드를 나쁘게 보이기 위한 방법
### 13.5.1 열거형 사용
* 리팩터링이 필요한 코드를 눈에 띄게 만드는 좋은 방법은 부울과 같은 타입 코드 대신 열거형을 넣는 것이다.
* 열거형은 추가하기가 일반적으로 빠르고 간단하며 쉽게 발견할 수 있다.
* 열거형을 리패겉링하는 것은 시간이 많이 걸리기는 하지만 간단하다.
  * 이름이 지정되어 있기 때문에 일기가 더 쉽다는 부가적인 장점도 있다.

### 13.5.2 정수형 및 문자열을 타입 코드로 사용
* 열거형을 추가할 능력이 없거나 무언가를 빨리 동작시켜야 할 때 int나 string을 타입 코드로 사용할 때가 있다.
* 문자열 타입 코드는 모든 값을 미리 선언할 필요가 없으므로 유연하다.
* 이 방법은 자연스럽게 열거형을 사용하도록 유도한다.

### 13.5.3 코드에 매직 넘버 넣기
* 이 기법을 사용하면 정보가 파괴될 위험이 있으므로 조심해야 한다.
  * 상수의 이름이 좋지 않거나 부정확하게 명명되면 추가 정보를 더하지 않아서 문제의식 없이 인라인으로 사용될 수 있다.
  * 이름에 정보가 존재하는지 판단할 수 없거나 정보에 대해 아는 것이 있다면 상수를 인라인으로 사용할 때마다 항상 주석을 달아서 첫 번째 규칙을 만족시켜야 한다.

### 13.5.4 코드에 주석 넣기
* 메서드 이름으로 사용할 수 있는 주석을 추가하는 것은 향후 리팩터링 작업의 시작 위치를 알리는 좋은 방법이다.

### 13.5.5 코드에 공백 넣기
* 메서드를 분리할 위치를 제안할 수 있는 또 다른 방법은 공백을 삽입하는 것이다.
* 공백인 줄은 코드문을 그룹화하는 것 외에도 필드를 그룹화해서 데이터를 캡슐화할 위치를 제안할 수도 있다.

### 13.5.6 이름을 기준으로 항목을 그룹화하기
* 캡슐화 후보로 표시할 수 있는 또 다른 방법은 그룹화할 항목에 공통 접사를 붙이는 것이다.
* 이 방법은 공통 접사를 사용하지 말 것 규칙이 적용되지 않는 드문 경우에는 위험하다.
* 공통 접사는 구체적으로 데이터 캡슐화를 적용해야 한다는 신호다.

### 13.5.7 이름에 컨텍스트 추가하기
* 메서드 및 필드 이름이 아직 공통 접사를 공유하고 있지 않은 경우 향후 데이터 캡슐화를 더 쉽게 하기 위해 공통 접사를 이름에 추가할 수 있다.

### 13.5.8 긴 메서드 만들기
* 긴 메서드는 대부분의 개발자에게 경고 신호이므로 무언가를 수행해야 한다는 명확한신호가 된다.

### 13.5.9 메서드에 많은 매개변수 넘기기
* 메서드가 많은 매개변수를 갖도록 하는 것은 메서드를 정의하는 쪽과 메서드를 호출하는 쪽 둘 다 명확히 식별된다.

### 13.5.10 getter와 setter 사용하기
* 눈의 띄게 만드는 또 다른 접근 방식은 전역 변수가 공개 필드 대신 getter와 setter를 사용하는 것이다.
